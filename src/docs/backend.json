
{
  "entities": {
    "UserProfile": {
      "title": "User Profile",
      "type": "object",
      "description": "Represents a user's profile information.",
      "properties": {
        "uid": {
          "type": "string",
          "description": "The user's unique ID from Firebase Authentication."
        },
        "name": {
          "type": "string",
          "description": "The user's full name."
        },
        "email": {
          "type": "string",
          "description": "The user's email address.",
          "format": "email"
        },
        "role": {
          "type": "string",
          "description": "The user's role in the application.",
          "enum": ["admin", "user"]
        }
      },
      "required": ["uid", "name", "email", "role"]
    },
    "AppConfiguration": {
        "title": "App Configuration",
        "type": "object",
        "description": "Stores application-level configuration.",
        "properties": {
            "allowedDomains": {
                "type": "array",
                "description": "List of email domains allowed for user registration.",
                "items": {
                    "type": "string"
                }
            }
        }
    },
    "Employee": {
      "title": "Employee",
      "type": "object",
      "description": "Represents an employee of Inditex or Grupo Axo.",
      "properties": {
        "employeeNumber": {
          "type": "string",
          "description": "The employee's number, as assigned by their company."
        },
        "name": {
          "type": "string",
          "description": "The employee's full name."
        },
        "companyId": {
          "type": "string",
          "description": "Reference to Company. (Relationship: Company 1:N Employee)"
        },
        "department": {
          "type": "string",
          "description": "The employee's department within the company."
        },
        "email": {
          "type": "string",
          "description": "The employee's email address.",
          "format": "email"
        },
        "active": {
          "type": "boolean",
          "description": "Indicates whether the employee is currently active."
        },
        "paymentAmount": {
          "type": "number",
          "description": "The amount the employee has to pay for a meal."
        },
        "voided": {
            "type": "boolean",
            "description": "Indicates whether the employee record has been voided/archived."
        }
      },
      "required": [
        "employeeNumber",
        "name",
        "companyId"
      ]
    },
    "Consumption": {
      "title": "Consumption",
      "type": "object",
      "description": "Represents a single instance of an employee accessing a meal or making a purchase.",
      "properties": {
        "employeeId": {
          "type": "string",
          "description": "Reference to Employee. (Relationship: Employee 1:N Consumption)"
        },
        "employeeNumber": {
          "type": "string",
          "description": "Denormalized employee number for easier querying."
        },
        "name": {
          "type": "string",
          "description": "Denormalized employee name."
        },
        "companyId": {
          "type": "string",
          "description": "Denormalized company ID."
        },
        "timestamp": {
          "type": "string",
          "description": "The date and time the consumption occurred.",
          "format": "date-time"
        },
        "voided": {
          "type": "boolean",
          "description": "Indicates whether the consumption record has been voided."
        },
        "items": {
          "type": "array",
          "description": "A list of items purchased in the transaction (for Kiosk mode).",
          "items": {
            "type": "object",
            "properties": {
              "itemId": {"type": "string"},
              "name": {"type": "string"},
              "price": {"type": "number"},
              "quantity": {"type": "number"}
            }
          }
        },
        "totalAmount": {
          "type": "number",
          "description": "The total amount of the transaction (for Kiosk mode)."
        },
        "status": {
            "type": "string",
            "description": "The status of an order in the kitchen command center.",
            "enum": ["pending", "completed"]
        }
      },
      "required": [
        "employeeId",
        "timestamp",
        "employeeNumber",
        "name",
        "companyId"
      ]
    },
    "Company": {
      "title": "Company",
      "type": "object",
      "description": "Represents the company (e.g., Inditex, Grupo Axo, Noticieros).",
      "properties": {
        "name": {
          "type": "string",
          "description": "The name of the company."
        },
        "accessCode": {
            "type": "string",
            "description": "The access code for the company."
        },
        "mealPrice": {
          "type": "number",
          "description": "The price per meal for this company."
        },
        "dailyTarget": {
          "type": "number",
          "description": "The daily meal target for special billing calculations (e.g., 300 for Grupo Axo)."
        },
        "billingNote": {
          "type": "string",
          "description": "A note displayed on the admin card to explain special billing rules."
        }
      },
      "required": [
        "name"
      ]
    },
    "MenuItem": {
      "title": "Menu Item",
      "type": "object",
      "description": "Represents an item available for purchase at the Kiosk.",
      "properties": {
        "sku": { "type": "string", "description": "Stock Keeping Unit for the item." },
        "name": { "type": "string", "description": "The name of the menu item." },
        "price": { "type": "number", "description": "The price of the item." },
        "category": { "type": "string", "description": "The category of the item (e.g., Platillo, Bebida, Postre)." },
        "companyId": { "type": "string", "description": "The ID of the company this menu item belongs to." }
      },
      "required": ["name", "price", "category", "companyId"]
    }
  },
  "auth": {
    "providers": [
      "email",
      "google"
    ]
  },
  "firestore": {
    "/companies/{companyId}": {
      "schema": {
        "$ref": "#/entities/Company"
      },
      "description": "Stores company information."
    },
    "/companies/{companyId}/employees/{employeeId}": {
      "schema": {
        "$ref": "#/entities/Employee"
      },
      "description": "Stores employee data for each company."
    },
    "/companies/{companyId}/consumptions/{consumptionId}": {
      "schema": {
        "$ref": "#/entities/Consumption"
      },
      "description": "Stores consumption records for each company."
    },
    "/companies/{companyId}/menuItems/{menuItemId}": {
      "schema": {
        "$ref": "#/entities/MenuItem"
      },
      "description": "Stores menu items for a specific company's kiosk."
    },
    "/users/{userId}": {
      "schema": {
        "$ref": "#/entities/UserProfile"
      },
      "description": "Stores public user profile information, including their role."
    },
    "/configuration/app": {
        "schema": {
            "$ref": "#/entities/AppConfiguration"
        },
        "description": "Stores global application settings, like allowed domains."
    }
  }
}
